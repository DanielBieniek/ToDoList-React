(this.webpackJsonptodoapp=this.webpackJsonptodoapp||[]).push([[0],{26:function(e,t,n){},34:function(e,t,n){"use strict";n.r(t);var s=n(1),a=n.n(s),r=n(19),c=n.n(r),i=(n(26),n(6)),o=n(12),u=n(0),l=function(e){var t,n=e.loggedIn,s=e.setLoggedIn,a=e.setLists;return Object(u.jsxs)("header",{children:[Object(u.jsx)("span",{children:"ToDo-List"}),(null!==(t=n.hasOwnProperty("user"))&&void 0!==t?t:n.user.id)?Object(u.jsx)(o.c,{role:"button",onClick:function(){a([]),s({})}}):""]})},j=n(3),d=n.n(j),b=n(8),h=function(e){var t=e.search,n=e.setSearch,s=e.setSort;return Object(u.jsxs)("div",{className:"SearchAndSort",children:[Object(u.jsx)("form",{onSubmit:function(e){return e.preventDefault()},children:Object(u.jsx)("input",{id:"search",type:"text",role:"searchbox",placeholder:"Search",value:t,onChange:function(e){return n(e.target.value)}})}),Object(u.jsxs)("select",{onChange:function(e){return s(e.target.value)},children:[Object(u.jsx)("option",{value:"",children:"Creation Date"}),Object(u.jsx)("option",{value:"name",children:"Name"})]})]})},p=n(11),O=function(e){var t=e.list,n=e.handleDeleteListElement;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)(p.b,{to:"/list/"+t.id,className:"ListElementLink",children:[Object(u.jsx)("span",{className:"TaskName",children:t.name}),Object(u.jsxs)("span",{children:["Created at: ",t.published_at.substring(0,10)]}),Object(u.jsxs)("span",{children:["Completed: ",t.task.filter((function(e){return!0===e.isDone})).length," Uncompleted: ",t.task.filter((function(e){return!1===e.isDone})).length," All: ",t.task.length]})]}),Object(u.jsx)(o.d,{className:"trashButton",role:"button",onClick:function(){return n(t.id)}})]})},m=n(4),f=function(e){var t=e.lists,n=e.setLists,a=e.auth,r=Object(m.g)(),c=Object(s.useState)(""),l=Object(i.a)(c,2),j=l[0],p=l[1],f=Object(s.useState)(""),x=Object(i.a)(f,2),g=x[0],v=x[1];Object(s.useEffect)((function(){var e=function(){var e=Object(b.a)(d.a.mark((function e(){var t,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g?"?_sort="+g:"",e.next=3,fetch("https://recruitment.ultimate.systems/to-do-lists"+t,{method:"GET",headers:{Authorization:"Bearer "+a,Accept:"application/json"}});case 3:return s=e.sent,e.next=6,s.json();case 6:s=e.sent,Array.isArray(s)&&n(s);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(b.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()}),[g]);var k={name:"ToDo List Name",task:[]},w=function(){var e=Object(b.a)(d.a.mark((function e(){var s,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://recruitment.ultimate.systems/to-do-lists",{method:"POST",headers:{Authorization:"Bearer "+a,"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(k)});case 2:return s=e.sent,e.next=5,s.json();case 5:(s=e.sent).hasOwnProperty("id")&&(c=t.concat(s),n(c),r.push("/list/"+s.id));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(b.a)(d.a.mark((function e(s){var r,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://recruitment.ultimate.systems/to-do-lists/"+s,{method:"DELETE",headers:{Authorization:"Bearer "+a,"Content-Type":"application/json",Accept:"application/json"}});case 2:return r=e.sent,e.next=5,r.json();case 5:(r=e.sent).hasOwnProperty("id")&&(c=t.filter((function(e){return e.id!==r.id})),n(c));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(u.jsxs)("div",{className:"ToDoList",children:[Object(u.jsxs)("ul",{children:[Object(u.jsx)(h,{search:j,setSearch:p,setSort:v}),(null===t||void 0===t?void 0:t.length)?Object(u.jsx)(u.Fragment,{children:t.filter((function(e){return e.name.toLowerCase().includes(j.toLowerCase())})).map((function(e){return Object(u.jsx)("li",{className:"ListElement",children:Object(u.jsx)(O,{list:e,handleDeleteListElement:y})},e.id)}))}):Object(u.jsx)("li",{className:"ListElement",children:Object(u.jsx)("span",{children:"List is empty."})})]}),Object(u.jsx)(o.b,{className:"link addListButton",role:"button",onClick:w})]})},x=n(2),g=function(e){var t=e.loggedIn,n=e.setLoggedIn,a=Object(s.useState)({identifier:"",password:""}),r=Object(i.a)(a,2),c=r[0],o=r[1],l=function(){var e=Object(b.a)(d.a.mark((function e(t){var s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,fetch("https://recruitment.ultimate.systems/auth/local",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(c)});case 3:return s=e.sent,e.next=6,s.json();case 6:s=e.sent,n(s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(u.jsxs)("div",{className:"Login",children:[Object(u.jsx)("h1",{children:"Login"}),Object(u.jsx)("br",{}),Object(u.jsx)("div",{className:"LoginError",children:t.hasOwnProperty("message")?t.message[0].messages[0].message:""}),Object(u.jsxs)("form",{onSubmit:l,children:[Object(u.jsx)("input",{type:"text",placeholder:"Email or Username",onChange:function(e){o(Object(x.a)(Object(x.a)({},c),{},{identifier:e.target.value}))},value:c.identifier}),Object(u.jsx)("input",{type:"password",placeholder:"Password",onChange:function(e){o(Object(x.a)(Object(x.a)({},c),{},{password:e.target.value}))},value:c.password}),Object(u.jsx)("button",{type:"submit",children:"Login"})]}),Object(u.jsx)("p",{children:"or"}),Object(u.jsx)(p.b,{to:"/register",className:"link",children:" create an account "})]})},v=function(e){var t=e.loggedIn,n=e.setLoggedIn,a=Object(s.useState)({username:"",email:"",password:""}),r=Object(i.a)(a,2),c=r[0],l=r[1],j=Object(s.useState)({password:""}),h=Object(i.a)(j,2),O=h[0],m=h[1],f=function(){var e=Object(b.a)(d.a.mark((function e(t){var s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),c.password!==O.password){e.next=12;break}return e.next=4,fetch("https://recruitment.ultimate.systems/auth/local/register",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(c)});case 4:return s=e.sent,e.next=7,s.json();case 7:s=e.sent,console.log(s),n(s),e.next=13;break;case 12:n({message:[{messages:[{message:"Passwords are not equal."}]}]});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(u.jsxs)("div",{className:"Register",children:[Object(u.jsxs)(p.b,{to:"/",className:"link",children:[" ",Object(u.jsx)(o.a,{})," "]}),Object(u.jsx)("h1",{children:"Create a new account"}),Object(u.jsx)("br",{}),Object(u.jsx)("div",{className:"LoginError",children:t.hasOwnProperty("message")?t.message[0].messages[0].message:""}),Object(u.jsxs)("form",{onSubmit:f,children:[Object(u.jsx)("input",{type:"text",placeholder:"Username",onChange:function(e){l(Object(x.a)(Object(x.a)({},c),{},{username:e.target.value}))},value:c.username}),Object(u.jsx)("input",{type:"text",placeholder:"Email",onChange:function(e){l(Object(x.a)(Object(x.a)({},c),{},{email:e.target.value}))},value:c.email}),Object(u.jsx)("input",{type:"password",placeholder:"Password",onChange:function(e){l(Object(x.a)(Object(x.a)({},c),{},{password:e.target.value}))},value:c.password}),Object(u.jsx)("input",{type:"password",placeholder:"Repeat Password",onChange:function(e){m({password:e.target.value})},value:O.password}),Object(u.jsx)("button",{type:"submit",children:"Create"})]})]})},k=function(e){var t=e.item,n=e.handleChangeCheckbox,s=e.handleChangeTaskName,a=e.handleDeleteTask;return Object(u.jsxs)("li",{className:"TaskElement",children:[Object(u.jsx)("input",{onChange:function(){return n(t.id)},type:"checkbox",checked:t.isDone}),Object(u.jsx)("input",{onChange:function(e){return s(e,t.id)},type:"text",placeholder:"Task name",value:t.name}),Object(u.jsx)(o.d,{className:"trashButton",role:"button",tabIndex:"0",onClick:function(){return a(t.id)}})]})},w=function(e){var t=e.newTask,n=e.setNewTask,s=e.handleAddTask;return Object(u.jsx)("li",{className:"TaskElement",children:Object(u.jsxs)("form",{onSubmit:function(e){return s(e)},children:[Object(u.jsx)("input",{id:"addTaskCheckBox",type:"checkbox",checked:t.isDone,onChange:function(e){return n(Object(x.a)(Object(x.a)({},t),{},{isDone:!t.isDone}))}}),Object(u.jsx)("input",{id:"addTaskText",type:"text",placeholder:"Task name",value:t.name,onChange:function(e){return n(Object(x.a)(Object(x.a)({},t),{},{name:e.target.value}))},required:!0}),Object(u.jsx)("button",{type:"submit",className:"AddTask",children:"ADD"})]})})},y=function(e){var t=e.lists,n=(e.setLists,e.auth),a=Object(m.g)(),r=Object(m.h)().id,c=Object(s.useState)({name:"",task:[]}),o=Object(i.a)(c,2),l=o[0],j=o[1],h=Object(s.useState)({id:1,name:"",isDone:!1}),p=Object(i.a)(h,2),O=p[0],f=p[1];Object(s.useEffect)((function(){var e=function(){var e=Object(b.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://recruitment.ultimate.systems/to-do-lists/"+r,{method:"GET",headers:{Authorization:"Bearer "+n,Accept:"application/json"}});case 2:return t=e.sent,e.next=5,t.json();case 5:(t=e.sent).hasOwnProperty("id")&&(j({name:t.name,task:t.task}),f(Object(x.a)(Object(x.a)({},O),{},{id:t.task.length?t.task[t.task.length-1].id+1:1})));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(b.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()}),[]);var g=function(e){var t=Object(x.a)(Object(x.a)({},l),{},{task:l.task.map((function(t){return t.id===e?Object(x.a)(Object(x.a)({},t),{},{isDone:!t.isDone}):t}))});j(t)},v=function(e,t){var n=Object(x.a)(Object(x.a)({},l),{},{task:l.task.map((function(n){return n.id===t?Object(x.a)(Object(x.a)({},n),{},{name:e.target.value}):n}))});j(n)},y=function(e){var t=Object(x.a)(Object(x.a)({},l),{},{task:l.task.filter((function(t){return t.id!==e}))});j(t)},C=function(){var e=Object(b.a)(d.a.mark((function e(){var t,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={name:l.name,task:l.task.map((function(e){return{name:e.name,isDone:e.isDone}}))},e.next=3,fetch("https://recruitment.ultimate.systems/to-do-lists/"+r,{method:"PUT",headers:{Authorization:"Bearer "+n,"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(t)});case 3:return s=e.sent,e.next=6,s.json();case 6:(s=e.sent).hasOwnProperty("id")&&a.push("/list");case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return t.findIndex((function(e){return e.id===parseInt(r)}))<0&&a.push("/"),Object(u.jsxs)("div",{className:"Tasks",children:[Object(u.jsx)("input",{onChange:function(e){return function(e){var t=Object(x.a)(Object(x.a)({},l),{},{name:e.target.value});j(t)}(e)},type:"text",placeholder:"List name",value:l.name}),Object(u.jsxs)("ul",{className:"TaskList",children:[l.task.map((function(e){return Object(u.jsx)(k,{item:e,handleChangeCheckbox:g,handleChangeTaskName:v,handleDeleteTask:y},e.id)})),Object(u.jsx)(w,{newTask:O,handleAddTask:function(e){e.preventDefault();var t=Object(x.a)(Object(x.a)({},l),{},{task:l.task.concat(O)});j(t),f({id:O.id+1,name:"",isDone:!1})},setNewTask:f})]}),Object(u.jsxs)("div",{className:"TaskNav",children:[Object(u.jsx)("button",{onClick:function(){a.push("/list")},className:"Cancel",children:"CANCEL"}),Object(u.jsx)("button",{onClick:C,children:"SAVE"})]})]})};var C=function(){var e,t,n,a,r=Object(s.useState)({}),c=Object(i.a)(r,2),o=c[0],j=c[1],d=Object(s.useState)([]),b=Object(i.a)(d,2),h=b[0],p=b[1];return Object(s.useEffect)((function(){j(JSON.parse(localStorage.getItem("loggedIn"))||{}),p(JSON.parse(localStorage.getItem("ToDoList"))||[])}),[]),Object(s.useEffect)((function(){localStorage.setItem("ToDoList",JSON.stringify(h))}),[h]),Object(s.useEffect)((function(){o.hasOwnProperty("user")?localStorage.setItem("loggedIn",JSON.stringify(o)):localStorage.removeItem("loggedIn")}),[o]),Object(u.jsxs)("div",{className:"App",children:[Object(u.jsx)(l,{loggedIn:o,setLoggedIn:j,setLists:p}),Object(u.jsx)("main",{children:Object(u.jsxs)(m.d,{children:[Object(u.jsx)(m.b,{exact:!0,path:"/",children:(null!==(e=o.hasOwnProperty("user"))&&void 0!==e?e:o.user.id)?Object(u.jsx)(m.a,{to:"/list"}):Object(u.jsx)(g,{loggedIn:o,setLoggedIn:j})}),Object(u.jsx)(m.b,{path:"/register",children:(null!==(t=o.hasOwnProperty("user"))&&void 0!==t?t:o.user.id)?Object(u.jsx)(m.a,{to:"/list"}):Object(u.jsx)(v,{loggedIn:o,setLoggedIn:j})}),Object(u.jsx)(m.b,{exact:!0,path:"/list",children:(null!==(n=o.hasOwnProperty("user"))&&void 0!==n?n:o.user.id)?Object(u.jsx)(f,{lists:h,setLists:p,auth:o.jwt}):Object(u.jsx)(m.a,{to:"/"})}),Object(u.jsx)(m.b,{path:"/list/:id",children:(null!==(a=o.hasOwnProperty("user"))&&void 0!==a?a:o.user.id)?Object(u.jsx)(y,{lists:h,setLists:p,auth:o.jwt}):Object(u.jsx)(m.a,{to:"/"})}),Object(u.jsx)(m.b,{path:"*",children:Object(u.jsx)("div",{children:"404 - webpage not found"})})]})}),Object(u.jsx)("footer",{children:"Daniel Bieniek"})]})};c.a.render(Object(u.jsx)(a.a.StrictMode,{children:Object(u.jsx)(p.a,{children:Object(u.jsx)(m.b,{path:"/",component:C})})}),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.7d5eb5ec.chunk.js.map